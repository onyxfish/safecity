h2. Basic Request Patterns

* "on $location": enable reports for the senders number or update senders location if already registered
* "update $location": update location for sender
* "off": disable reports for the senders number

h2. Process / Workflow

* Text message is received
* If it matches a basic request pattern, the appropriate handler responds
* Otherwise its handled by the violence report logic
* The message is stored in the database
* The text is scraped for location info (street names, etc)
* Once the location is identified its lat/lon is looked up in the database
* The message is rebroadcast to anyone who has requested messages and is near the reported location
* After two hours the message is scrubbed of its identifying information
* The message is posted online

h2. Custom Apps

* locate: annotates location information onto message
* TODO: services: refers the user to services near them (if no parsed location, try signup info)
* signup: register, deregister, and update citizen info
* danger: stores and rebroadcasts reports of suspicious activity

h2. Misc TODO

* logger should not record phone numbers

h2. Bugs in RapidSMS

* Dashboard pages don't check that user is logged in